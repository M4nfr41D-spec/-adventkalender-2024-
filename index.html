<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Adventkalender Generator</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,sans-serif;background:linear-gradient(135deg,#020617,#0f172a);color:#e5e7eb;min-height:100vh;padding:20px;display:flex;align-items:center;justify-content:center}
.container{max-width:700px;width:100%}
h1{text-align:center;margin-bottom:20px;font-size:2rem;color:#facc15}
.card{border-radius:16px;border:1px solid #374151;background:rgba(15,23,42,.9);padding:24px}
label{display:block;margin-bottom:12px;font-weight:600;color:#f3f4f6}
input[type=file]{width:100%;padding:14px;border:2px dashed #4b5563;border-radius:12px;background:rgba(31,41,55,.5);color:#d1d5db;cursor:pointer;margin-bottom:16px}
input[type=file]:hover{border-color:#22c55e}
ul{font-size:.85rem;color:#9ca3af;padding-left:20px;margin-bottom:16px;line-height:1.8}
.settings{background:rgba(31,41,55,.5);border-radius:12px;padding:16px;margin-bottom:20px}
.settings h3{font-size:.95rem;color:#fbbf24;margin-bottom:12px}
.slider-label{display:flex;justify-content:space-between;margin-bottom:8px;font-size:.85rem;color:#d1d5db}
.slider-value{color:#22c55e;font-weight:600}
input[type=range]{width:100%;height:6px;border-radius:999px;background:#374151;outline:0;-webkit-appearance:none;margin-bottom:12px}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:#22c55e;cursor:pointer}
input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#22c55e;cursor:pointer;border:0}
button{width:100%;padding:14px 24px;border-radius:12px;border:0;background:linear-gradient(135deg,#16a34a,#22c55e);color:#fff;font-weight:700;font-size:1rem;cursor:pointer}
button:hover:not(:disabled){transform:translateY(-2px)}
button:disabled{opacity:.5;cursor:not-allowed}
.progress{display:none;margin-top:20px;padding:16px;background:rgba(31,41,55,.5);border-radius:12px}
.progress.show{display:block}
.bar{width:100%;height:8px;background:#374151;border-radius:999px;margin-bottom:12px;overflow:hidden}
.fill{height:100%;background:linear-gradient(90deg,#16a34a,#22c55e);width:0%;transition:width .3s}
.text{font-size:.85rem;color:#d1d5db;text-align:center}
.status{margin-top:16px;padding:12px;border-radius:8px;font-size:.85rem;display:none}
.status.show{display:block}
.status.ok{background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.3);color:#86efac}
.status.err{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);color:#fca5a5}
</style>
</head>
<body>
<div class="container">
<h1>üéÑ Adventkalender Generator</h1>
<div class="card">
<label for="f">üì∏ W√§hle 1‚Äì24 Bilder aus:</label>
<input id="f" type="file" accept="image/*" multiple>
<ul>
<li>Reihenfolge nach Dateinamen (alphabetisch)</li>
<li>Bilder werden automatisch komprimiert</li>
</ul>
<div class="settings">
<h3>‚öôÔ∏è Einstellungen</h3>
<div class="slider-label"><span>Bildqualit√§t</span><span class="slider-value" id="qv">80%</span></div>
<input type="range" id="q" min="50" max="95" value="80" step="5">
<div class="slider-label"><span>Max. Bildbreite</span><span class="slider-value" id="wv">1200px</span></div>
<input type="range" id="w" min="800" max="2000" value="1200" step="100">
</div>
<button id="b">üéÅ Kalender erstellen</button>
<div class="progress" id="p">
<div class="bar"><div class="fill" id="pf"></div></div>
<div class="text" id="pt"></div>
</div>
<div class="status" id="s"></div>
</div>
</div>
<script>
(function(){
const f=document.getElementById('f'),s=document.getElementById('s'),b=document.getElementById('b'),
pc=document.getElementById('p'),pf=document.getElementById('pf'),pt=document.getElementById('pt'),
q=document.getElementById('q'),qv=document.getElementById('qv'),w=document.getElementById('w'),
wv=document.getElementById('wv');

q.oninput=e=>qv.textContent=e.target.value+'%';
w.oninput=e=>wv.textContent=e.target.value+'px';

function show(msg,typ){s.textContent=msg;s.className='status show '+(typ||'');}
function prog(pct,txt){pf.style.width=pct+'%';pt.textContent=txt;}
function compress(file,mw,qual){
return new Promise((resolve,reject)=>{
const r=new FileReader();
r.onload=e=>{
const img=new Image();
img.onload=()=>{
const c=document.createElement('canvas');
let width=img.width,height=img.height;
if(width>mw){height=(height*mw)/width;width=mw;}
c.width=width;c.height=height;
c.getContext('2d').drawImage(img,0,0,width,height);
c.toBlob(blob=>{
if(blob){
const r2=new FileReader();
r2.onload=()=>resolve(r2.result);
r2.readAsDataURL(blob);
}else reject(new Error('Fehler'));
},'image/jpeg',qual/100);
};
img.src=e.target.result;
};
r.readAsDataURL(file);
});
}

b.onclick=async()=>{
const fl=f.files;
if(!fl||fl.length===0){show('‚ö†Ô∏è Bitte Bilder ausw√§hlen','err');return;}
const mw=parseInt(w.value),qual=parseInt(q.value);
const files=Array.from(fl).sort((a,b)=>a.name.localeCompare(b.name,undefined,{numeric:true})).slice(0,24);
b.disabled=true;pc.classList.add('show');
try{
const imgs=[];
for(let i=0;i<files.length;i++){
prog((i+1)/files.length*100,'Verarbeite Bild '+(i+1)+' von '+files.length+'...');
const data=await compress(files[i],mw,qual);
imgs.push({day:i+1,name:files[i].name,src:data});
}
prog(100,'Erstelle Kalender...');
const html=build(imgs);
const blob=new Blob([html],{type:'text/html;charset=utf-8'});
const url=URL.createObjectURL(blob);
const a=document.createElement('a');
a.href=url;a.download='advent_'+new Date().getFullYear()+'.html';a.click();
URL.revokeObjectURL(url);
pc.classList.remove('show');
show('‚úÖ Fertig! Datei wurde heruntergeladen.','ok');
}catch(err){
pc.classList.remove('show');
show('‚ùå Fehler: '+err.message,'err');
}finally{
b.disabled=false;
}
};

function build(imgs){
const y=new Date().getFullYear();
const j=JSON.stringify(imgs);
return '<!DOCTYPE html><html lang="de"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>üéÑ Adventkalender '+y+'</title><style>@keyframes fall{0%{transform:translateY(-100vh) rotate(0deg)}100%{transform:translateY(100vh) rotate(360deg)}}@keyframes glow{0%,100%{text-shadow:0 0 20px #ffd700,0 0 30px #ffd700,0 0 40px #ff0000}50%{text-shadow:0 0 30px #ffd700,0 0 40px #ffd700,0 0 50px #ff0000}}@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px) rotate(-5deg)}75%{transform:translateX(5px) rotate(5deg)}}@keyframes doorOpen{0%{transform:scale(1) rotate(0deg)}50%{transform:scale(1.1) rotate(5deg)}100%{transform:scale(1) rotate(0deg)}}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:radial-gradient(ellipse at top,#1e3a5f 0%,#0a1628 50%,#000000 100%);color:#fff;min-height:100vh;padding:20px;overflow-x:hidden;position:relative}body::before{content:"";position:fixed;inset:0;background:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 1920 1080\'%3E%3Cdefs%3E%3CradialGradient id=\'g\'%3E%3Cstop offset=\'0%25\' stop-color=\'%23ffffff\' stop-opacity=\'.3\'/%3E%3Cstop offset=\'100%25\' stop-color=\'%23ffffff\' stop-opacity=\'0\'/%3E%3C/radialGradient%3E%3C/defs%3E%3C/svg%3E");pointer-events:none;opacity:.3}.snowflake{position:fixed;top:-10px;color:#fff;font-size:1em;opacity:.8;animation:fall linear infinite;z-index:1;pointer-events:none;text-shadow:0 0 5px #fff}.container{max-width:1200px;margin:0 auto;position:relative;z-index:2}header{text-align:center;margin-bottom:40px;padding:20px;background:rgba(139,0,0,.3);border-radius:20px;border:2px solid rgba(255,215,0,.3);box-shadow:0 10px 40px rgba(255,215,0,.2)}h1{font-size:clamp(2rem,5vw,3.5rem);background:linear-gradient(45deg,#ff0000,#ffd700,#00ff00,#ffd700,#ff0000);background-size:300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:glow 3s ease-in-out infinite;margin-bottom:10px;font-weight:900;letter-spacing:2px}.subtitle{color:#ffd700;font-size:1.1rem;text-shadow:0 2px 10px rgba(255,215,0,.5);margin-top:10px}.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:16px;max-width:1100px;margin:0 auto;padding:20px}@media(max-width:1024px){.grid{grid-template-columns:repeat(4,1fr)}}@media(max-width:640px){.grid{grid-template-columns:repeat(3,1fr);gap:12px}}.door{background:linear-gradient(135deg,#8b0000 0%,#dc143c 50%,#8b0000 100%);padding:clamp(15px,3vw,25px);border-radius:16px;cursor:pointer;text-align:center;font-size:clamp(1.5rem,3vw,2.5rem);font-weight:900;transition:all .3s ease;position:relative;border:3px solid rgba(255,215,0,.5);box-shadow:0 8px 20px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.2);overflow:hidden;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.door::before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 30%,rgba(255,215,0,.3) 50%,transparent 70%);transform:translateX(-100%);transition:transform .6s}.door:hover::before{transform:translateX(100%)}.door:hover{transform:translateY(-8px) scale(1.05);box-shadow:0 15px 35px rgba(255,215,0,.4),inset 0 1px 0 rgba(255,255,255,.3);border-color:#ffd700}.door::after{content:"üéÅ";position:absolute;top:5px;right:5px;font-size:1.2rem;opacity:.7}.door.locked{background:linear-gradient(135deg,#1e3a8a 0%,#3b82f6 50%,#1e3a8a 100%);cursor:not-allowed;border-color:rgba(59,130,246,.5)}.door.locked::after{content:"üîí"}.door.opened{background:linear-gradient(135deg,#065f46 0%,#10b981 50%,#065f46 100%);border-color:rgba(16,185,129,.8);animation:doorOpen .5s ease}.door.opened::after{content:"‚ú®";animation:shake 2s ease-in-out infinite}.door .num{position:relative;z-index:1;display:block}.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.95);align-items:center;justify-content:center;padding:20px;z-index:1000;backdrop-filter:blur(10px)}.modal.active{display:flex;animation:fadeIn .3s ease}.modal-content{position:relative;max-width:95%;max-height:95vh;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);padding:20px;border-radius:20px;border:3px solid #ffd700;box-shadow:0 20px 60px rgba(255,215,0,.3)}.modal img{max-width:100%;max-height:75vh;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.5);display:block}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:15px;border-bottom:2px solid rgba(255,215,0,.3)}.modal-title{color:#ffd700;font-size:1.5rem;font-weight:700;text-shadow:0 2px 10px rgba(255,215,0,.5)}.btn{padding:12px 24px;background:linear-gradient(135deg,#dc143c,#8b0000);border:2px solid #ffd700;border-radius:12px;color:#fff;cursor:pointer;font-weight:700;font-size:1rem;transition:all .3s;box-shadow:0 4px 15px rgba(220,20,60,.4)}.btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(220,20,60,.6);background:linear-gradient(135deg,#ff1744,#dc143c)}.download-btn{background:linear-gradient(135deg,#10b981,#065f46);border-color:#ffd700;margin-right:10px}.download-btn:hover{background:linear-gradient(135deg,#34d399,#10b981)}footer{text-align:center;margin-top:50px;padding:20px;color:rgba(255,215,0,.7);font-size:.9rem;text-shadow:0 1px 3px rgba(0,0,0,.5)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}</style></head><body><div class="container"><header><h1>üéÑ Mein Adventkalender '+y+' üéÑ</h1><p class="subtitle">‚ú® Jeden Tag eine neue √úberraschung ‚ú®</p></header><div class="grid" id="g"></div></div><div class="modal" id="m"><div class="modal-content"><div class="modal-header"><div class="modal-title" id="mt">T√ºrchen</div><div><button class="btn download-btn" id="dl">üì• Bild speichern</button><button class="btn" onclick="document.getElementById(\'m\').classList.remove(\'active\')">‚úï Schlie√üen</button></div></div><img id="mi" alt="Adventkalender Bild"></div></div><footer>Made with ‚ù§Ô∏è ‚Ä¢ Frohe Weihnachten! üéÖ</footer><script>const d='+j+',n=new Date(),y='+y+',map={};d.forEach(i=>map[i.day]=i);const g=document.getElementById("g"),m=document.getElementById("m"),mi=document.getElementById("mi"),mt=document.getElementById("mt"),dl=document.getElementById("dl");for(let i=0;i<50;i++){const s=document.createElement("div");s.className="snowflake";s.innerHTML=["‚ùÑ","‚ùÖ","‚ùÜ"][Math.floor(Math.random()*3)];s.style.left=Math.random()*100+"%";s.style.animationDuration=Math.random()*3+2+"s";s.style.opacity=Math.random()*.5+.3;s.style.fontSize=Math.random()*10+10+"px";s.style.animationDelay=Math.random()*5+"s";document.body.appendChild(s)}for(let i=1;i<=24;i++){const div=document.createElement("div");div.className="door";const unlocked=n.getFullYear()===y&&n.getMonth()===11&&n.getDate()>=i,opened=localStorage.getItem("ao"+y+i)==="1";if(!unlocked)div.classList.add("locked");if(opened)div.classList.add("opened");div.innerHTML=\'<span class="num">\'+i+(opened?\' <span style="color:#ffd700">‚úì</span>\':"")+\'</span>\';div.onclick=()=>{if(!unlocked)return alert("üîí Dieses T√ºrchen √∂ffnet sich erst am "+i+". Dezember "+y+"!\\n\\nüéÑ Nur noch "+(i-n.getDate())+" Tag"+(i-n.getDate()===1?"":"e")+" warten!");if(!map[i])return alert("üì≠ F√ºr dieses T√ºrchen wurde leider kein Bild hinterlegt.");mt.textContent="üéÅ T√ºrchen "+i+" - "+i+". Dezember";mi.src=map[i].src;mi.alt="Bild von T√ºrchen "+i;dl.onclick=()=>{const a=document.createElement("a");a.href=map[i].src;a.download="Adventkalender_Tag_"+i+".jpg";a.click()};m.classList.add("active");if(!opened){localStorage.setItem("ao"+y+i,"1");div.classList.add("opened");div.innerHTML=\'<span class="num">\'+i+\' <span style="color:#ffd700">‚úì</span></span>\'}};g.appendChild(div)}m.onclick=e=>{if(e.target===m)m.classList.remove("active")}<\/script></body></html>';
}
})();
</script>
</body>
</html>
